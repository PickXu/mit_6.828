Read chapter 4 of xv6 book (../../book-xv6.pdf) with spinlock.c and skim mp.c
